---
sidebar_position: 4
---

# Ruby

The [Ruby](https://www.ruby-lang.org/) interpreter is no embedded in Wasm Workers Server. To create workers based on this language, you first need to install a Ruby runtime.

Fortunately, we provide precompiled `ruby.wasm` modules in our [WebAssembly Language Runtimes](https://github.com/vmware-labs/webassembly-language-runtimes/) project, so the installation is simple:

## Installation

To install the Ruby module, run the following commands:

```
mkdir my-wws-project
cd my-wws-project
wws runtimes install ruby latest
```

## Your first Ruby worker

Ruby workers are based on the [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) / [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) objects from the Web Fetch API.

Since these entities don't exist in the Ruby language, the worker includes a polyfill with these two classes. You can find the [polyfill code here](#).

In this example, the worker will get a request and print all the related information.

1. First, create a new `index.rb` file with the following content. The `worker` method is mandatory as it will be the entrypoint for the worker:

    ```ruby title="./index.rb"
    def worker(req)
        Response.new("Hello from Ruby in WebAssembly!")
    end
    ```

1. Now, you can add more content to the `worker` method to show the request information. In addition to that, let's add a response header.

    ```ruby title="./index.rb"
    def worker(req)
        # Body response
        body = %{
            <!DOCTYPE html>
            <body>
            <h1>Hello from Wasm Workers Server</h1>
            <p>Replying to #{req.url}</p>
            <p>Method: #{req.method}</p>
            <p>User Agent: #{req.headers.get("userAgent")}</p>
            <p>Payload: #{req.body || "-"}</p>
            <p>
                This page was generated by a Ruby file inside WebAssembly
            </p>
            </body>
        }

        # Build a new response
        res = Response.new(body)

        # Add a new header
        res.headers.set("x-generated-by", "wasm-workers-server")

        res
    end
    ```

1. Save the file
1. If you didn't download the `wws` server yet, check our [Getting Started](../get-started/quickstart.md) guide.
1. [Install the Ruby runtime](#installation)
1. Run your worker with `wws`

    ```bash
    wws

    âš™ï¸ Loading routes from: .
    ðŸ—º Detected routes:
        - http://127.0.0.1:8080/
        => index.rb (name: default)
    ðŸš€ Start serving requests at http://127.0.0.1:8080
    ```

1. Finally, open <http://127.0.0.1:8080> in your browser.